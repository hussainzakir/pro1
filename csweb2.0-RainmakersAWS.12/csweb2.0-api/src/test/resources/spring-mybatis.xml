<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:mvc="http://www.springframework.org/schema/mvc"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns="http://www.springframework.org/schema/beans"
	xmlns:p="http://www.springframework.org/schema/p"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/mvc 
		http://www.springframework.org/schema/mvc/spring-mvc.xsd
		http://www.springframework.org/schema/beans 
		http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/context 
		http://www.springframework.org/schema/context/spring-context.xsd">
	
	<!-- CBS data source configs -->
	<bean id="cbsTransactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
      <property name="dataSource" ref="cbsAs400DataSource" />
    </bean>
    
    <bean id="cbsSqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean"
        p:dataSource-ref="cbsAs400DataSource"
        p:configLocation="classpath:/mybatis/cbs/SqlMapConfig.xml" >
        <property name="configurationProperties" ref="cswebPropertyConfigurer"/>
        </bean>
    
    <bean id="cbsMapperScannerConfig" class="org.mybatis.spring.mapper.MapperScannerConfigurer" 
        p:basePackage="com.repsrv.csweb.core.**.dao" p:marker-interface="com.repsrv.csweb.core.mybatis.dao.CbsDao">
        <property name="sqlSessionFactoryBeanName" value="cbsSqlSessionFactory" />
    </bean>
	<bean id="cbsAs400DataSource"
          class="com.mchange.v2.c3p0.ComboPooledDataSource"
          destroy-method="close"
        p:driverClass="com.ibm.as400.access.AS400JDBCDriver"
        p:jdbcUrl="jdbc:as400://${cbs.jdbc.host};naming=system;errors=full;prompt=false;t=${cbs.jdbc.password};date format=iso"
        p:user="${cbs.jdbc.username}"
        p:password="${cbs.jdbc.password}"
        p:testConnectionOnCheckout="true"
        p:preferredTestQuery="SELECT 1 FROM SYSIBM.SYSDUMMY1"
        p:minPoolSize="5"
        p:maxPoolSize="15"/>
        
        
<!-- InfoProf data source configs -->
	<bean id="infoproTransactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
      <property name="dataSource" ref="infoproAs400DataSource" />
    </bean>
    
    <bean id="infoproSqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean"
        p:dataSource-ref="infoproAs400DataSource"
        p:configLocation="classpath:/mybatis/infopro/SqlMapConfig.xml" >
        <property name="configurationProperties" ref="cswebPropertyConfigurer"/>
        </bean>
    
    <bean id="infoproMapperScannerConfig" class="org.mybatis.spring.mapper.MapperScannerConfigurer" 
        p:basePackage="com.repsrv.csweb.core.**.dao" p:marker-interface="com.repsrv.csweb.core.mybatis.dao.InfoProDao">
        <property name="sqlSessionFactoryBeanName" value="infoproSqlSessionFactory" />
    </bean>
	<bean id="infoproAs400DataSource"
          class="com.mchange.v2.c3p0.ComboPooledDataSource"
          destroy-method="close"
        p:driverClass="com.ibm.as400.access.AS400JDBCDriver"
        p:jdbcUrl="jdbc:as400://${infopro.jdbc.host};naming=system;prompt=false;errors=full;t=${infopro.jdbc.password};date format=iso"
        p:user="${infopro.jdbc.username}"
        p:password="${infopro.jdbc.password}"
        p:testConnectionOnCheckout="true"
        p:preferredTestQuery="SELECT 1 FROM SYSIBM.SYSDUMMY1"
        p:minPoolSize="5"
        p:maxPoolSize="15"/>
        
</beans>
    

      